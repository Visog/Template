<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Bootstrap Snippet: Login Form</title>
  
  
<link rel="stylesheet" type="text/css" href="/visog-job-portal-ui/resources/css/Loginstyle.css">

  

  <link rel='stylesheet prefetch' href='http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css'>
     <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.1/angular.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/ngstorage/0.3.6/ngStorage.min.js"></script>
  <script >
/* $('select[name=dropdown]').change(function() {
    $('#result').html($(this).val());
}); */

var app = angular.module("myApp", ["ngStorage"]);
//Controller Part

app
		.controller(
				"myCtrl",
				
				function($scope, $http, $sessionStorage) {
				
					
					 $scope.submitLogin = function() {
			        	
						var method = "";
						var url = "";
						// alert($scope.postJob.id);
						if ($scope.Login.id == -1
								|| $scope.Login.id == undefined) {
							//Id is absent in form data, it is create new file operation
							    
							method = "POST";
							url = 'http://localhost:8080/visog-job-portal-api/Login/details';
							alert('hi');
							$http
									.post(
											url,
											{
												
												
											      "email": $scope.Login.username,
											      "password": $scope.Login.password
											}).then(function successCallback(response) {
												//alert("before"+response.data.data.id);
												// $sessionStorage.SessionMessage = "SessionStorage:stmnn";
												sessionStorage.setItem('user', JSON.stringify(response.data.data));
												var obj = JSON.parse(sessionStorage.getItem('user')); 
												console.log(obj.id+":::: OBJ");
												console.log(obj.firstName+":::: OBJ");
												
											}, function errorCallback(response) {
												alert(response.data.message);
												console.log(response.statusText);
											});
							//alert(url);

						} 
					};
					function _error(response) {
	                   // alert('kkkkkkkkkkkk'+response);
	                	//alert(response.data.message);
						console.log(response.statusText);
					}
					function _success(response) {
						   // alert('iiiii');
						//	alert(response.data.message);
							
							_clearFormData()
						}
					
					
					
					
				});
				
				
				
				
				
				
				</script>
  
  
</head>

<body  ng-app="myApp" ng-controller="myCtrl">
    <div class="wrapper">

     <form class="form-signin" ng-submit="submitLogin()" id="Login" ><div id='result'></div>    
      <h2 class="form-signin-heading">Please login</h2>

       
      
      <input type="text" class="form-control" name="username" placeholder="Email Address *" required  ng-model="Login.username" />
      <input type="password" class="form-control" name="password" placeholder="Password *" required  ng-model="Login.password" />      
      <!-- <label class="checkbox">
        <input type="checkbox" value="remember-me" id="rememberMe" name="rememberMe"> Remember me
      </label> -->
      <button class="btn btn-lg btn-primary btn-block" value="Submit" type="submit">Login</button>  
      
   
    </form>
  </div>
  
  
</body>
</html>
